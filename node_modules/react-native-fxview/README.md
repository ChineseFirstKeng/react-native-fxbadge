# React Native FXView

ä¸€ä¸ªé©å‘½æ€§çš„React NativeåŠ¨æ€UIé¢„åŸ‹æ¡†æ¶ï¼Œæ”¯æŒåœ¨ä»»ä½•ä½ç½®é¢„åŸ‹å®¹å™¨ï¼Œç„¶åé€šè¿‡å…¨å±€ç®¡ç†å™¨åœ¨è¿è¡Œæ—¶åŠ¨æ€æ³¨å…¥å’Œæ§åˆ¶Reactç»„ä»¶ã€‚

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

FXViewé‡‡ç”¨**é¢„åŸ‹+æ³¨å…¥**çš„è®¾è®¡æ¨¡å¼ï¼š

1. **é¢„åŸ‹å®¹å™¨**ï¼šåœ¨åº”ç”¨çš„ä»»ä½•ä½ç½®é¢„åŸ‹`FXView`å®¹å™¨
2. **åŠ¨æ€æ³¨å…¥**ï¼šé€šè¿‡`FXManager`åœ¨ä»»ä½•æ—¶é—´ã€ä»»ä½•ä½ç½®åŠ¨æ€æ³¨å…¥Reactç»„ä»¶
3. **å…¨å±€æ§åˆ¶**ï¼šæ”¯æŒè·¨ç»„ä»¶ã€è·¨é¡µé¢çš„å…¨å±€UIç®¡ç†å’ŒçŠ¶æ€æ§åˆ¶

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **åŠ¨æ€ç»„ä»¶æ³¨å…¥** - è¿è¡Œæ—¶åœ¨ä»»ä½•é¢„åŸ‹ä½ç½®æ³¨å…¥Reactç»„ä»¶
- ğŸ”„ **å®æ—¶UIæ›´æ–°** - æ”¯æŒç»„ä»¶å†…å®¹çš„å®æ—¶æ›´æ–°å’ŒçŠ¶æ€ç®¡ç†
- ğŸ“‚ **æ™ºèƒ½åˆ†ç±»ç®¡ç†** - æŒ‰åˆ†ç±»ç»„ç»‡å’Œç®¡ç†åŠ¨æ€ç»„ä»¶
- ğŸ‘ï¸ **æ˜¾ç¤º/éšè—æ§åˆ¶** - çµæ´»æ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤ºçŠ¶æ€
- ğŸŒ **å…¨å±€è®¿é—®** - ä»åº”ç”¨çš„ä»»ä½•åœ°æ–¹è®¿é—®å’Œç®¡ç†UI
- ğŸš€ **è½»é‡çº§é«˜æ€§èƒ½** - ä¼˜åŒ–çš„æ¸²æŸ“æ€§èƒ½å’Œå†…å­˜ç®¡ç†
- ğŸ“Š **ç»„ä»¶çŠ¶æ€æŸ¥è¯¢** - æ”¯æŒæŸ¥è¯¢ç»„ä»¶æ•°é‡å’Œå¯è§çŠ¶æ€
- ğŸ”„ **ç”Ÿå‘½å‘¨æœŸç®¡ç†** - æ”¯æŒè§†å›¾çš„æŒ‚è½½å’Œå¸è½½å›è°ƒ

## ğŸ“¦ å®‰è£…

```bash
npm install react-native-fxview
# æˆ–è€…
yarn add react-native-fxview
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é¢„åŸ‹FXViewå®¹å™¨

åœ¨ä»»ä½•éœ€è¦åŠ¨æ€æ³¨å…¥UIçš„ä½ç½®é¢„åŸ‹FXViewï¼š

```javascript
import React from 'react';
import { View, Text } from 'react-native';
import { FXView } from 'react-native-fxview';

export default function App() {
  return (
    <View style={{ flex: 1 }}>
      <Text>é™æ€å†…å®¹</Text>
      
      {/* é¢„åŸ‹åŠ¨æ€UIå®¹å™¨ */}
      <FXView fxViewId="headerArea" style={{ height: 60 }} />
      
      <Text>æ›´å¤šé™æ€å†…å®¹</Text>
      
      {/* åœ¨åº•éƒ¨é¢„åŸ‹å¦ä¸€ä¸ªå®¹å™¨ */}
      <FXView fxViewId="bottomSheet" style={{ position: 'absolute', bottom: 0 }} />
    </View>
  );
}
```

### 2. åŠ¨æ€æ³¨å…¥ç»„ä»¶

ä»åº”ç”¨çš„ä»»ä½•åœ°æ–¹ï¼ˆç”šè‡³ä¸åŒçš„é¡µé¢æˆ–ç»„ä»¶ï¼‰åŠ¨æ€æ³¨å…¥UIï¼š

```javascript
import { FXManager } from 'react-native-fxview';
import { Button, View, Text } from 'react-native';

// åœ¨headerAreaæ³¨å…¥ä¸€ä¸ªæœç´¢æ 
const searchBarController = FXManager.add(
  <View style={{ backgroundColor: '#f0f0f0', padding: 10 }}>
    <Text>æœç´¢æ ç»„ä»¶</Text>
  </View>,
  'headerArea',  // fxViewId
  'navigation'   // categoryId
);

// åœ¨bottomSheetæ³¨å…¥ä¸€ä¸ªå¼¹çª—
const sheetController = FXManager.add(
  <View style={{ backgroundColor: 'white', padding: 20, borderRadius: 10 }}>
    <Text>åº•éƒ¨å¼¹çª—å†…å®¹</Text>
    <Button title="å…³é—­" onPress={() => sheetController.hide()} />
  </View>,
  'bottomSheet',
  'modals'
);
```

### 3. è¿è¡Œæ—¶æ§åˆ¶

```javascript
// éšè—æœç´¢æ 
searchBarController.hide();

// æ›´æ–°æœç´¢æ å†…å®¹
searchBarController.update(
  <View style={{ backgroundColor: 'blue', padding: 10 }}>
    <Text style={{ color: 'white' }}>æ›´æ–°åçš„æœç´¢æ </Text>
  </View>
);

// æ˜¾ç¤ºæœç´¢æ 
searchBarController.show();

// å®Œå…¨ç§»é™¤ç»„ä»¶
searchBarController.remove();
```

## ğŸ“– API å‚è€ƒ

### FXView Props

- `fxViewId` (string, optional): å®¹å™¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºåç»­æ³¨å…¥ç»„ä»¶æ—¶çš„å®šä½
- æ”¯æŒæ‰€æœ‰æ ‡å‡†çš„ `ViewProps` å±æ€§

### FXManager ä¸»è¦æ–¹æ³•

#### ç»„ä»¶ç®¡ç†
- `add(component, fxViewId?, category?, componentId?)` - åˆ›å»ºå¹¶æ˜¾ç¤ºç»„ä»¶
- `build(component, fxViewId?, category?, componentId?)` - åˆ›å»ºä½†ä¸æ˜¾ç¤ºç»„ä»¶
- `show(componentId, fxViewId?, category?)` - æ˜¾ç¤ºå·²å­˜åœ¨çš„ç»„ä»¶
- `hide(componentId, fxViewId?, category?)` - éšè—ç»„ä»¶
- `update(componentId, newComponent, fxViewId?, category?)` - æ›´æ–°ç»„ä»¶å†…å®¹
- `remove(componentId, fxViewId?, category?)` - ç§»é™¤ç»„ä»¶
- `removeLast(fxViewId?, category?)` - ç§»é™¤æœ€åä¸€ä¸ªç»„ä»¶ï¼ˆå‘åå…¼å®¹ï¼‰

#### æ‰¹é‡æ“ä½œ
- `clearAll(fxViewId?)` - æ¸…ç©ºæŒ‡å®šæˆ–æ‰€æœ‰å®¹å™¨
- `clearCategory(categoryId, fxViewId?)` - æ¸…ç©ºæŒ‡å®šåˆ†ç±»

#### æŸ¥è¯¢æ–¹æ³•
- `getComponents(fxViewId?, category?)` - è·å–ç»„ä»¶åˆ—è¡¨
- `getComponentCount(fxViewId?)` - è·å–ç»„ä»¶æ•°é‡
- `getVisibleComponentCount(fxViewId?)` - è·å–å¯è§ç»„ä»¶æ•°é‡
- `hasComponent(componentId, fxViewId?, category?)` - æ£€æŸ¥ç»„ä»¶æ˜¯å¦å­˜åœ¨
- `isComponentVisible(componentId, fxViewId?, category?)` - æ£€æŸ¥ç»„ä»¶æ˜¯å¦å¯è§
- `getLatestFXViewId()` - è·å–æœ€è¿‘ä½¿ç”¨çš„è§†å›¾ID

#### è§†å›¾ç®¡ç†
- `registerView(fxViewId, updateCallback)` - æ³¨å†Œè§†å›¾ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
- `unregisterView(fxViewId)` - æ³¨é”€è§†å›¾ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
- `registerLifecycleCallbacks(callbacks)` - æ³¨å†Œç”Ÿå‘½å‘¨æœŸå›è°ƒ
- `unregisterLifecycleCallbacks(callbacks)` - æ³¨é”€ç”Ÿå‘½å‘¨æœŸå›è°ƒ

### ç»„ä»¶æ§åˆ¶å™¨ (FXComponentController)

- `show()` - æ˜¾ç¤ºç»„ä»¶
- `hide()` - éšè—ç»„ä»¶
- `remove()` - ç§»é™¤ç»„ä»¶
- `update(newComponent)` - æ›´æ–°ç»„ä»¶å†…å®¹
- `isVisible()` - è·å–å¯è§çŠ¶æ€
- `exists()` - æ£€æŸ¥ç»„ä»¶æ˜¯å¦å­˜åœ¨

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### 1. åŠ¨æ€å¯¼èˆªæ 
åœ¨ä¸åŒé¡µé¢æ ¹æ®çŠ¶æ€åŠ¨æ€æ”¹å˜é¡¶éƒ¨å¯¼èˆªæ å†…å®¹

### 2. å…¨å±€å¼¹çª—ç³»ç»Ÿ
ä»ä»»ä½•åœ°æ–¹è§¦å‘å…¨å±€å¼¹çª—ã€é€šçŸ¥ã€ç¡®è®¤æ¡†ç­‰

### 3. åŠ¨æ€è¡¨å•
æ ¹æ®ç”¨æˆ·æ“ä½œåŠ¨æ€æ·»åŠ ã€ç§»é™¤ã€æ›´æ–°è¡¨å•å­—æ®µ

### 4. æ’ä»¶åŒ–UI
æ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶åŠ¨æ€æ³¨å…¥UIç»„ä»¶åˆ°ä¸»åº”ç”¨

### 5. A/Bæµ‹è¯•
åŠ¨æ€åˆ‡æ¢ä¸åŒçš„UIç»„ä»¶è¿›è¡ŒA/Bæµ‹è¯•

### 6. å®æ—¶é€šçŸ¥ç³»ç»Ÿ
åœ¨åº”ç”¨çš„æŒ‡å®šä½ç½®åŠ¨æ€æ˜¾ç¤ºé€šçŸ¥å’Œæç¤ºä¿¡æ¯

## ğŸ¯ æœ€ä½³å®è·µ

### åˆ†ç±»ç®¡ç†
ä½¿ç”¨åˆ†ç±»æ¥ç»„ç»‡ä¸åŒç±»å‹çš„åŠ¨æ€ç»„ä»¶ï¼š

```javascript
// å¯¼èˆªç›¸å…³
FXManager.add(navComponent, 'header', 'navigation');

// å¼¹çª—ç›¸å…³
FXManager.add(modalComponent, 'overlay', 'modals');

// é€šçŸ¥ç›¸å…³
FXManager.add(toastComponent, 'notification', 'notifications');
```

### ç”Ÿå‘½å‘¨æœŸç®¡ç†
```javascript
// åˆ›å»ºæ—¶
const controller = FXManager.build(component, 'container');

// éœ€è¦æ—¶æ˜¾ç¤º
controller.show();

// ä¸éœ€è¦æ—¶éšè—
controller.hide();

// å®Œå…¨æ¸…ç†
controller.remove();
```

### ç»„ä»¶çŠ¶æ€ç›‘æ§
```javascript
// æ£€æŸ¥ç»„ä»¶æ˜¯å¦å­˜åœ¨
const exists = FXManager.hasComponent('myComponent', 'container');

// æ£€æŸ¥ç»„ä»¶æ˜¯å¦å¯è§
const visible = FXManager.isComponentVisible('myComponent', 'container');

// è·å–ç»„ä»¶æ•°é‡
const count = FXManager.getComponentCount('container');

// è·å–å¯è§ç»„ä»¶æ•°é‡
const visibleCount = FXManager.getVisibleComponentCount('container');
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### ç”Ÿå‘½å‘¨æœŸå›è°ƒ
```javascript
FXManager.registerLifecycleCallbacks({
  didMount: (fxViewId) => console.log('FXViewæŒ‚è½½:', fxViewId),
  willUnmount: (fxViewId) => console.log('FXViewå¸è½½:', fxViewId)
});
```

### ç»„ä»¶æŸ¥è¯¢å’Œæ‰¹é‡æ“ä½œ
```javascript
// è·å–æ‰€æœ‰å¯¼èˆªç»„ä»¶
const navComponents = FXManager.getComponents(null, 'navigation');

// æ¸…ç©ºæ‰€æœ‰å¼¹çª—
FXManager.clearCategory('modals');

// æ¸…ç©ºæŒ‡å®šå®¹å™¨çš„æ‰€æœ‰ç»„ä»¶
FXManager.clearAll('container');

// æ¸…ç©ºæ‰€æœ‰å®¹å™¨çš„æ‰€æœ‰ç»„ä»¶
FXManager.clearAll();
```

### è‡ªåŠ¨è§†å›¾IDç®¡ç†
```javascript
// ä¸æŒ‡å®šfxViewIdï¼Œä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„ID
const controller = FXManager.add(component);

// è·å–æœ€è¿‘ä½¿ç”¨çš„è§†å›¾ID
const latestViewId = FXManager.getLatestFXViewId();
```

## ğŸ“„ è®¸å¯è¯

MIT